-- Создание таблицы для товаров
CREATE TABLE IF NOT EXISTS products (
    id SERIAL PRIMARY KEY,
    name VARCHAR(500) NOT NULL,
    description TEXT,
    price_text VARCHAR(100) NOT NULL,
    price_num INTEGER NOT NULL,
    category VARCHAR(100) NOT NULL,
    image_url VARCHAR(1000),
    is_available BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Добавление индекса для фильтрации по категории и доступности
CREATE INDEX idx_products_category ON products(category, is_available);
CREATE INDEX idx_products_available ON products(is_available, created_at DESC);

-- Перенос существующих товаров из кода в базу данных
INSERT INTO products (name, description, price_text, price_num, category, image_url, is_available) VALUES 
('Ваза из осины №111', 'Размер 20,5×16 см, высота 10 см. Плавные линии осины создают изящную форму, будто созданную самим ветром.', '2 500 ₽', 2500, 'Вазы', 'https://cdn.poehali.dev/files/Изображение WhatsApp 2024-10-19 в 10.13.44_939a7e38.jpg', true),
('Шкатулка из берёзы №113', 'Размер 12×10 см, высота 8 см. Природная фактура берёзы с тёмными включениями создаёт живописный узор.', '1 500 ₽', 1500, 'Шкатулки', 'https://cdn.poehali.dev/files/Изображение WhatsApp 2024-10-19 в 10.13.44_999fa5cc.jpg', true),
('Ваза из берёзы №133', 'Размер 19×21 см, высота 13 см. Объёмная форма с необычным основанием, подчёркивающая текстуру древесины.', '3 000 ₽', 3000, 'Вазы', 'https://cdn.poehali.dev/files/Изображение WhatsApp 2024-10-19 в 10.13.44_2650fca9.jpg', true),
('Ваза из берёзы №92', 'Размер 20×16 см, высота 12 см. Волнистые края и органичная форма создают эффект морской раковины.', '3 000 ₽', 3000, 'Вазы', 'https://cdn.poehali.dev/files/Изображение WhatsApp 2024-10-19 в 10.13.43_9e50f45d.jpg', true),
('Ваза из берёзы №51', 'Размер 13,5×13 см, высота 11 см. Компактная форма с выраженным рельефом и природным узором.', '2 500 ₽', 2500, 'Вазы', 'https://cdn.poehali.dev/files/Изображение WhatsApp 2024-10-19 в 10.13.43_3513d2c9.jpg', true),
('Ваза из карельской берёзы №132', 'Размер 17×17 см, высота 9 см. Уникальный рисунок карельской берёзы создаёт неповторимую текстуру.', '4 000 ₽', 4000, 'Вазы', 'https://cdn.poehali.dev/files/Изображение WhatsApp 2024-10-19 в 10.13.43_1e23ef57.jpg', true),
('Пепельница №95', 'Размер 11×8 см, высота 6 см. Практичное изделие с природным узором, идеально для интерьера.', '800 ₽', 800, 'Пепельницы', 'https://cdn.poehali.dev/files/Изображение WhatsApp 2024-10-19 в 10.13.43_0ea80cba.jpg', true),
('Шкатулка №99', 'Размер 13,5×7 см, высота 7 см. Элегантная овальная форма с яркими цветовыми переходами.', '1 800 ₽', 1800, 'Шкатулки', 'https://cdn.poehali.dev/files/Изображение WhatsApp 2024-10-19 в 10.13.42_f3c70e62.jpg', true),
('Ваза "Бокал" из берёзы №134', 'Размер 13×13 см, высота 14 см. Изящная форма бокала подчёркивает благородство материала.', '2 500 ₽', 2500, 'Вазы', 'https://cdn.poehali.dev/files/Изображение WhatsApp 2024-10-19 в 10.13.42_d4f0a0e0.jpg', true),
('Ваза из берёзы №129', 'Размер 14×13 см, высота 11,5 см. Гладкая поверхность с естественными узорами древесины.', '2 000 ₽', 2000, 'Вазы', 'https://cdn.poehali.dev/files/Изображение WhatsApp 2024-10-19 в 10.13.42_9c0c8b0b.jpg', true),
('Ваза из осины №138', 'Размер 17×13 см, высота 10 см. Асимметричная форма с волнистыми краями создаёт эффект движения.', '2 500 ₽', 2500, 'Вазы', 'https://cdn.poehali.dev/files/Изображение WhatsApp 2024-10-19 в 10.13.42_67c59f1f.jpg', true),
('Ваза из берёзы №109', 'Размер 20×16,5 см, высота 12 см. Массивная форма с природными включениями.', '3 000 ₽', 3000, 'Вазы', 'https://cdn.poehali.dev/files/Изображение WhatsApp 2024-10-19 в 10.13.42_8d2513ea.jpg', true);